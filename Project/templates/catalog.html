<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Каталог отопительных приборов</title>
  <link rel="stylesheet" href="/static/styles/catalog.css">
</head>
<body>
  <!-- Хедер -->
  <header class="header">
    <div class="logo">
      <a href="/">
        <svg width="58" height="58" viewBox="0 0 58 58" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clip-path="url(#clip0)">
            <path d="M21.79 55.4667L21.7879 35.8916L34.2624 35.8903L34.2644 55.4654L49.8574 55.4638L49.8547 29.3637L59.2105 29.3627L28.0214 0.00324703L-3.16159 29.3692L6.19423 29.3682L6.19693 55.4683L21.79 55.4667Z" fill="white"/>
          </g>
          <defs>
            <clipPath id="clip0">
              <rect width="57.6862" height="57.6862" fill="white"/>
            </clipPath>
          </defs>
        </svg>
      </a>
    </div>
  </header>

  <!-- Поиск и корзина -->
  <div class="top-bar">
    <div class="search-bar">
      <form method="GET" action="/catalog_heaters" class="search-form">
        <input type="text" name="query" class="search-input" placeholder="Поиск...">
        <button type="submit" class="search-button">Найти</button>
      </form>
    </div>
    <div class="cart-container">
      {{if gt .cart_count 0}}
        <!-- если корзина не пуста -->
        <a href="/heaters_application" class="cart-icon">
          <svg viewBox="0 0 24 24">
            <path d="M7 4h-2l-3 9v2h2l3-9zm0 11a2 2 0 1 0 4 0 2 2 0 0 0-4 0zm9-11h-6l-1 2h8v2h-8l1 2h6v2h-6l1 2h6v2h-6l1 2h6v2h-6v-2h-6v-2h6l-1-2h-6v-2h6l-1-2h-6v-2h6l-1-2h6v-2z"/>
          </svg>
          <div class="cart-count">{{.cart_count}}</div>
        </a>
      {{else}}
        <!-- если корзина пуста -->
        <div class="cart-icon" style="opacity:0.5; cursor: default; pointer-events:none;">
          <svg viewBox="0 0 24 24">
            <path d="M7 4h-2l-3 9v2h2l3-9zm0 11a2 2 0 1 0 4 0 2 2 0 0 0-4 0zm9-11h-6l-1 2h8v2h-8l1 2h6v2h-6l1 2h6v2h-6l1 2h6v2h-6v-2h-6v-2h6l-1-2h-6v-2h6l-1-2h-6v-2h6l-1-2h6v-2z"/>
          </svg>
          <div class="cart-count">0</div>
        </div>
      {{end}}
    </div>
  </div>

  <!-- Каталог товаров -->
  <div class="products">
    {{range .products}}
      <div class="product-card">
        <img src="{{.Image}}" alt="{{.Title}}">
        <div class="content">
          <div class="product-title">{{.Title}}</div>
          <div class="product-specs">{{.Efficiency}}</div>
          <div style="margin-top:auto; width:100%; display:flex; justify-content:center; gap:10px;">
            <!-- Подробнее -->
            <a href="/heater/{{.ID}}" class="product-button">Подробнее</a>
            <!-- Добавить в корзину -->
            <form method="POST" action="/add-to-cart/{{.ID}}" style="display:inline;">
              <button type="submit" class="product-button">+</button>
            </form>
          </div>
        </div>
      </div>
    {{end}}
  </div>
</body>
</html>
